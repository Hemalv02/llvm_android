From cc9090b3efee7600850f2e16eb9d27e6e509806a Mon Sep 17 00:00:00 2001
From: AdityaK <appujee@google.com>
Date: Mon, 5 Jun 2023 11:30:53 -0700
Subject: [PATCH] [clang-tidy, llvm-objcopy] Disable failing tests for darwin
 builds

Change-Id: I09c20a5bb044f095bbf44d40111c34fd0e6fe390
---
 .../clang-tidy/checkers/performance/trivially-destructible.cpp | 3 +++
 llvm/test/tools/llvm-objcopy/ELF/strip-preserve-atime.test     | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/clang-tools-extra/test/clang-tidy/checkers/performance/trivially-destructible.cpp b/clang-tools-extra/test/clang-tidy/checkers/performance/trivially-destructible.cpp
index 927a0905ee42..be3b4eab2873 100644
--- a/clang-tools-extra/test/clang-tidy/checkers/performance/trivially-destructible.cpp
+++ b/clang-tools-extra/test/clang-tidy/checkers/performance/trivially-destructible.cpp
@@ -3,6 +3,9 @@
 // RUN: clang-tidy %t.cpp -checks='-*,performance-trivially-destructible' -fix
 // RUN: clang-tidy %t.cpp -checks='-*,performance-trivially-destructible' -warnings-as-errors='-*,performance-trivially-destructible'
 
+// For fat binaries this test fails: https://github.com/llvm/llvm-project/issues/60304
+// UNSUPPORTED: system-darwin
+
 struct TriviallyDestructible1 {
   int a;
 };
diff --git a/llvm/test/tools/llvm-objcopy/ELF/strip-preserve-atime.test b/llvm/test/tools/llvm-objcopy/ELF/strip-preserve-atime.test
index b145599d9ff3..465422428206 100644
--- a/llvm/test/tools/llvm-objcopy/ELF/strip-preserve-atime.test
+++ b/llvm/test/tools/llvm-objcopy/ELF/strip-preserve-atime.test
@@ -1,7 +1,7 @@
 # Note: ls -lu prints the accessed timestamp
 # NetBSD: noatime mounts currently inhibit 'touch -a' updates
 # Windows: the last access time is disabled by default in the OS
-# UNSUPPORTED: system-netbsd, system-windows
+# UNSUPPORTED: system-netbsd, system-windows, system-darwin
 
 # Preserve dates when stripping to an output file.
 # RUN: yaml2obj %s -o %t.1.o
-- 
2.41.0.162.gfafddb0af9-goog

